<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.19" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.66" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://xiucaistack.cn/%E5%90%8E%E7%AB%AF%E8%BF%9B%E9%98%B6%E4%B9%8B%E8%B7%AF/%E9%9D%A2%E8%AF%95%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%BD%93%E9%9D%A2%E8%AF%95%E5%AE%98%E9%97%AE%E8%B5%B7_%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1_%EF%BC%8C%E5%93%AA%E4%BA%9B%E7%82%B9%E6%98%AF%E6%A0%B8%E5%BF%83%EF%BC%9F.html"><meta property="og:site_name" content="秀才的进阶之路"><meta property="og:title" content="当面试官问题“负载均衡”，哪些点是核心？"><meta property="og:description" content="当面试官问题“负载均衡”，哪些点是核心？ 负载均衡，这个话题在微服务架构里几乎无人不晓，也是面试中的"常客"。我们都知道，它在分布式系统中处于核心位置，任何一次服务调用，首先要面对的就是负载均衡该如何选择。这自然也让它成了面试中的必考题。 但可惜的是，即便我们都清楚这是个必考点，却很难在面试中聊出新意和亮点。多数候选人的回答，往往只是简单地罗列几种自己..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-06-26T15:42:17.000Z"><meta property="article:tag" content="场景题"><meta property="article:tag" content="面试题"><meta property="article:tag" content="负载均衡"><meta property="article:modified_time" content="2025-06-26T15:42:17.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"当面试官问题“负载均衡”，哪些点是核心？","image":[""],"dateModified":"2025-06-26T15:42:17.000Z","author":[{"@type":"Person","name":"秀才","url":"https://github.com/Percygu"}]}</script><link rel="icon" href="/web_logo2.png"><title>当面试官问题“负载均衡”，哪些点是核心？ | 秀才的进阶之路</title><meta name="description" content="当面试官问题“负载均衡”，哪些点是核心？ 负载均衡，这个话题在微服务架构里几乎无人不晓，也是面试中的"常客"。我们都知道，它在分布式系统中处于核心位置，任何一次服务调用，首先要面对的就是负载均衡该如何选择。这自然也让它成了面试中的必考题。 但可惜的是，即便我们都清楚这是个必考点，却很难在面试中聊出新意和亮点。多数候选人的回答，往往只是简单地罗列几种自己...">
    <link rel="preload" href="/assets/style-ByOeqJdo.css" as="style"><link rel="stylesheet" href="/assets/style-ByOeqJdo.css">
    <link rel="modulepreload" href="/assets/app-DnLzMSw7.js"><link rel="modulepreload" href="/assets/当面试官问起_负载均衡_，哪些点是核心？.html-CesX9Ax_.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-mjKj_h3w.js" as="script"><link rel="prefetch" href="/assets/index.html-BNxjt1EW.js" as="script"><link rel="prefetch" href="/assets/disable.html-BdBONuL5.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-BGVTRbxw.js" as="script"><link rel="prefetch" href="/assets/layout.html-BkIC6DJt.js" as="script"><link rel="prefetch" href="/assets/markdown.html-DJeiYkQV.js" as="script"><link rel="prefetch" href="/assets/page.html-CNrb2u05.js" as="script"><link rel="prefetch" href="/assets/index.html-a1uZBFeV.js" as="script"><link rel="prefetch" href="/assets/2025 年你必须知道的 10 个向量数据库.html-BOm1GdIO.js" as="script"><link rel="prefetch" href="/assets/Cusor AI编程实战(1)：抖音爆款文案提取_改写工具(上).html-TCqnJUUq.js" as="script"><link rel="prefetch" href="/assets/Claude 4发布，程序员真的要失业了吗.html-CAZQwFb0.js" as="script"><link rel="prefetch" href="/assets/Cursor 1.0 终于来了.html-W4Or0bJG.js" as="script"><link rel="prefetch" href="/assets/一文讲透大模型应用开发：你必须掌握的新时代技术核心竞争力.html-DMWRgyVE.js" as="script"><link rel="prefetch" href="/assets/人工智能导论.html-DXNLwpti.js" as="script"><link rel="prefetch" href="/assets/什么是大语言模型.html-DzZ_kpxX.js" as="script"><link rel="prefetch" href="/assets/理解机器学习.html-CuyhqTGq.js" as="script"><link rel="prefetch" href="/assets/理解深度学习.html-Ci_vI6FC.js" as="script"><link rel="prefetch" href="/assets/生成式AI简介.html-B5g5uWbt.js" as="script"><link rel="prefetch" href="/assets/Go环境搭建.html-CtfNlwKf.js" as="script"><link rel="prefetch" href="/assets/Go编码规范.html-5nQfk2Pk.js" as="script"><link rel="prefetch" href="/assets/Go语言前景.html-Bhtw-QBt.js" as="script"><link rel="prefetch" href="/assets/Go语言单测.html-wh-PH5aQ.js" as="script"><link rel="prefetch" href="/assets/channel原理.html-BkpkWcnH.js" as="script"><link rel="prefetch" href="/assets/context原理.html-DXlhfxMz.js" as="script"><link rel="prefetch" href="/assets/defer原理.html-DOinvKLj.js" as="script"><link rel="prefetch" href="/assets/gmp调度原理.html-LGnmb--R.js" as="script"><link rel="prefetch" href="/assets/interface原理.html-D6_Hrwgw.js" as="script"><link rel="prefetch" href="/assets/map原理.html-vm54ApjL.js" as="script"><link rel="prefetch" href="/assets/slice原理.html-C8SQQU7y.js" as="script"><link rel="prefetch" href="/assets/string原理.html-D7249HaK.js" as="script"><link rel="prefetch" href="/assets/sync.map原理.html-UwfpI7wh.js" as="script"><link rel="prefetch" href="/assets/内存管理.html-BMl5oHai.js" as="script"><link rel="prefetch" href="/assets/垃圾回收.html-CjQQWFUC.js" as="script"><link rel="prefetch" href="/assets/程序初始化.html-BzS6SydU.js" as="script"><link rel="prefetch" href="/assets/逃逸分析.html-D4AqoKY6.js" as="script"><link rel="prefetch" href="/assets/Go语言Map.html-wMWgwNhe.js" as="script"><link rel="prefetch" href="/assets/Go语言defer.html-oKxErW24.js" as="script"><link rel="prefetch" href="/assets/Go语言error.html-oVpGaqQ8.js" as="script"><link rel="prefetch" href="/assets/Go语言代码结构.html-w332_kaD.js" as="script"><link rel="prefetch" href="/assets/Go语言依赖管理.html-QqLYQ65Z.js" as="script"><link rel="prefetch" href="/assets/Go语言函数.html-BuQwVazs.js" as="script"><link rel="prefetch" href="/assets/Go语言变量.html-vcAO2c44.js" as="script"><link rel="prefetch" href="/assets/Go语言命名规范.html-DHFlRV2x.js" as="script"><link rel="prefetch" href="/assets/Go语言常量.html-BgfCymlO.js" as="script"><link rel="prefetch" href="/assets/Go语言异常捕获.html-DrUdPvdJ.js" as="script"><link rel="prefetch" href="/assets/Go语言循环.html-CBJAPegr.js" as="script"><link rel="prefetch" href="/assets/Go语言指针.html-UHWx-Shy.js" as="script"><link rel="prefetch" href="/assets/Go语言接口.html-DB7tvIt7.js" as="script"><link rel="prefetch" href="/assets/Go语言数组与切片.html-DBWHWvVo.js" as="script"><link rel="prefetch" href="/assets/Go语言方法.html-CZlomeCF.js" as="script"><link rel="prefetch" href="/assets/Go语言条件句.html-Dc5jJpKc.js" as="script"><link rel="prefetch" href="/assets/Go语言结构体.html-CwCxqoL2.js" as="script"><link rel="prefetch" href="/assets/Go语言运算符.html-CXaUlobd.js" as="script"><link rel="prefetch" href="/assets/gin.html-vbvoDIPf.js" as="script"><link rel="prefetch" href="/assets/gorm.html-rSo49oKT.js" as="script"><link rel="prefetch" href="/assets/Channel.html-DJpzaMud.js" as="script"><link rel="prefetch" href="/assets/Context.html-BfwEr6a2.js" as="script"><link rel="prefetch" href="/assets/Goroutine.html-2l3alRzB.js" as="script"><link rel="prefetch" href="/assets/Select.html-WvWFM4qf.js" as="script"><link rel="prefetch" href="/assets/Sync.html-BD59oXeF.js" as="script"><link rel="prefetch" href="/assets/协程池.html-D5hiEEwE.js" as="script"><link rel="prefetch" href="/assets/反射.html-VrDlIeMJ.js" as="script"><link rel="prefetch" href="/assets/定时器.html-q1lQndOm.js" as="script"><link rel="prefetch" href="/assets/并发概述.html-BA7RGvFx.js" as="script"><link rel="prefetch" href="/assets/范型.html-DlHZL3bX.js" as="script"><link rel="prefetch" href="/assets/Channel面试题.html-Cl1maafD.js" as="script"><link rel="prefetch" href="/assets/Context面试题.html-C2Z7c0FA.js" as="script"><link rel="prefetch" href="/assets/GMP面试题.html-CZ0Jl28z.js" as="script"><link rel="prefetch" href="/assets/Interface面试题.html-CGHnatxn.js" as="script"><link rel="prefetch" href="/assets/Map面试题.html-BRJy7Wf7.js" as="script"><link rel="prefetch" href="/assets/Slice面试题.html-D-JxiP33.js" as="script"><link rel="prefetch" href="/assets/Sync面试题.html-CaraVh6k.js" as="script"><link rel="prefetch" href="/assets/代码面试题.html-C13KuJ1U.js" as="script"><link rel="prefetch" href="/assets/内存管理面试题.html-BK8fgygu.js" as="script"><link rel="prefetch" href="/assets/反射面试题.html-BHuvmGnJ.js" as="script"><link rel="prefetch" href="/assets/垃圾回收面试题.html-BWYcSJo_.js" as="script"><link rel="prefetch" href="/assets/基础面试题.html-BRTNfrZr.js" as="script"><link rel="prefetch" href="/assets/index.html-Bq0UQCXK.js" as="script"><link rel="prefetch" href="/assets/baz.html-wbH5ft0J.js" as="script"><link rel="prefetch" href="/assets/index.html-C4C3WlIR.js" as="script"><link rel="prefetch" href="/assets/ray.html-C5i9-1I9.js" as="script"><link rel="prefetch" href="/assets/mysql.html-DIQKlcqu.js" as="script"><link rel="prefetch" href="/assets/mysql1.html-C7n_8GAF.js" as="script"><link rel="prefetch" href="/assets/redis.html-BH5pzy3z.js" as="script"><link rel="prefetch" href="/assets/Go程序数据库连接池耗尽如何排查.html-BxTGalWv.js" as="script"><link rel="prefetch" href="/assets/Java线上接口响应慢如何排查.html-BUNtSAch.js" as="script"><link rel="prefetch" href="/assets/微服务架构核心：服务注册与发现的AP与CP抉择.html-BbH_BWbf.js" as="script"><link rel="prefetch" href="/assets/服务降级：从有损服务到保障核心业务的架构智慧.html-DMCWxdwX.js" as="script"><link rel="prefetch" href="/assets/熔断：如何优雅地应对服务雪崩与抖动.html-CiAKngaa.js" as="script"><link rel="prefetch" href="/assets/限流：从算法到阈值，一次性讲透.html-BUFCQGW7.js" as="script"><link rel="prefetch" href="/assets/李煜1.html-CJbok9Ad.js" as="script"><link rel="prefetch" href="/assets/李煜2.html-52Qgm5sc.js" as="script"><link rel="prefetch" href="/assets/辛弃疾1.html-BIGAidu9.js" as="script"><link rel="prefetch" href="/assets/辛弃疾2.html-m1yYjH7F.js" as="script"><link rel="prefetch" href="/assets/消息丢失.html-CHBWQqTS.js" as="script"><link rel="prefetch" href="/assets/Agent.html-DVlmlJz5.js" as="script"><link rel="prefetch" href="/assets/LCEL.html-B8ssXFwV.js" as="script"><link rel="prefetch" href="/assets/LangChain基础概念.html-kVv7iHAP.js" as="script"><link rel="prefetch" href="/assets/Memery.html-DzMLpfRm.js" as="script"><link rel="prefetch" href="/assets/Model-IO.html-C8SeZGmz.js" as="script"><link rel="prefetch" href="/assets/RAG(检索增强).html-BICvGAvf.js" as="script"><link rel="prefetch" href="/assets/回调.html-CTNFBmQX.js" as="script"><link rel="prefetch" href="/assets/数据连接.html-_pXfp6gI.js" as="script"><link rel="prefetch" href="/assets/流式传输.html-BleYPkTj.js" as="script"><link rel="prefetch" href="/assets/链.html-CWIKOcW-.js" as="script"><link rel="prefetch" href="/assets/RAG总体概览.html-Bcgp6nmG.js" as="script"><link rel="prefetch" href="/assets/大模型简介.html-CuEdLj9B.js" as="script"><link rel="prefetch" href="/assets/404.html-BbQOjVwP.js" as="script"><link rel="prefetch" href="/assets/index.html-KXuA7OvQ.js" as="script"><link rel="prefetch" href="/assets/index.html-CccUJ0Tx.js" as="script"><link rel="prefetch" href="/assets/index.html-D7Ug0Aci.js" as="script"><link rel="prefetch" href="/assets/index.html-CxloT2n-.js" as="script"><link rel="prefetch" href="/assets/index.html-BJ2YsXFD.js" as="script"><link rel="prefetch" href="/assets/index.html-DJeLn3pY.js" as="script"><link rel="prefetch" href="/assets/index.html-qVDLA_c4.js" as="script"><link rel="prefetch" href="/assets/index.html-CyVuAJXi.js" as="script"><link rel="prefetch" href="/assets/index.html-B7bRy_hB.js" as="script"><link rel="prefetch" href="/assets/index.html-DBIiKCxQ.js" as="script"><link rel="prefetch" href="/assets/index.html-CW7eOUGp.js" as="script"><link rel="prefetch" href="/assets/index.html-Blnhk7Qt.js" as="script"><link rel="prefetch" href="/assets/index.html-DVEYydRj.js" as="script"><link rel="prefetch" href="/assets/index.html-CV8SrsST.js" as="script"><link rel="prefetch" href="/assets/index.html-KD1ijCxO.js" as="script"><link rel="prefetch" href="/assets/index.html-BovGX6Vr.js" as="script"><link rel="prefetch" href="/assets/index.html-DawJY7MA.js" as="script"><link rel="prefetch" href="/assets/index.html-BZ4sFnJH.js" as="script"><link rel="prefetch" href="/assets/index.html-Dg9XgeUz.js" as="script"><link rel="prefetch" href="/assets/index.html-jDtD7S3Q.js" as="script"><link rel="prefetch" href="/assets/index.html-dAu7d3Jl.js" as="script"><link rel="prefetch" href="/assets/index.html-Kw6E9hc8.js" as="script"><link rel="prefetch" href="/assets/index.html-FmndcNcs.js" as="script"><link rel="prefetch" href="/assets/index.html-B0s2imGf.js" as="script"><link rel="prefetch" href="/assets/index.html-subaLe4k.js" as="script"><link rel="prefetch" href="/assets/index.html-C87MXskD.js" as="script"><link rel="prefetch" href="/assets/index.html-BgEVAYSf.js" as="script"><link rel="prefetch" href="/assets/index.html-Btgrd13q.js" as="script"><link rel="prefetch" href="/assets/index.html-BRX8U4Mr.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script"><link rel="prefetch" href="/assets/giscus-BZxmVUME.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-Cquo9_1s.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/" aria-label="带我回家"><img class="vp-nav-logo" src="/web_logo2.png" alt><!----><span class="vp-site-name hide-in-pad">秀才的进阶之路</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="秀才的进阶之路"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->秀才的进阶之路<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/Go%E8%AF%AD%E8%A8%80%E7%B3%BB%E5%88%97/Go%E8%AF%AD%E8%A8%80%E5%89%8D%E6%99%AF/Go%E8%AF%AD%E8%A8%80%E5%89%8D%E6%99%AF.html" aria-label="Go语言进阶之路"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><!--]-->Go语言进阶之路<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/%E5%90%8E%E7%AB%AF%E8%BF%9B%E9%98%B6%E4%B9%8B%E8%B7%AF/%E9%9D%A2%E8%AF%95%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E6%A0%B8%E5%BF%83%EF%BC%9A%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0%E7%9A%84AP%E4%B8%8ECP%E6%8A%89%E6%8B%A9.html" aria-label="后端进阶之路"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-chart-simple" style=""></span><!--]-->后端进阶之路<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/AI%E8%BF%9B%E9%98%B6%E4%B9%8B%E8%B7%AF/%E7%94%9F%E6%88%90%E5%BC%8FAI%E5%85%A5%E9%97%A8/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E5%AF%BC%E8%AE%BA.html" aria-label="AI进阶之路"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-robot" style=""></span><!--]-->AI进阶之路<!----></a></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/yourusername/xiucai-stack" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">面试场景题</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/%E5%90%8E%E7%AB%AF%E8%BF%9B%E9%98%B6%E4%B9%8B%E8%B7%AF/%E9%9D%A2%E8%AF%95%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E6%A0%B8%E5%BF%83%EF%BC%9A%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0%E7%9A%84AP%E4%B8%8ECP%E6%8A%89%E6%8B%A9.html" aria-label="微服务架构核心：服务注册与发现的AP与CP抉择"><!---->微服务架构核心：服务注册与发现的AP与CP抉择<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/%E5%90%8E%E7%AB%AF%E8%BF%9B%E9%98%B6%E4%B9%8B%E8%B7%AF/%E9%9D%A2%E8%AF%95%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%BD%93%E9%9D%A2%E8%AF%95%E5%AE%98%E9%97%AE%E8%B5%B7_%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1_%EF%BC%8C%E5%93%AA%E4%BA%9B%E7%82%B9%E6%98%AF%E6%A0%B8%E5%BF%83%EF%BC%9F.html" aria-label="当面试官问题“负载均衡”，哪些点是核心？"><!---->当面试官问题“负载均衡”，哪些点是核心？<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E5%90%8E%E7%AB%AF%E8%BF%9B%E9%98%B6%E4%B9%8B%E8%B7%AF/%E9%9D%A2%E8%AF%95%E5%9C%BA%E6%99%AF%E9%A2%98/%E7%86%94%E6%96%AD%EF%BC%9A%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E5%9C%B0%E5%BA%94%E5%AF%B9%E6%9C%8D%E5%8A%A1%E9%9B%AA%E5%B4%A9%E4%B8%8E%E6%8A%96%E5%8A%A8.html" aria-label="熔断：如何优雅地应对服务雪崩与抖动"><!---->熔断：如何优雅地应对服务雪崩与抖动<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E5%90%8E%E7%AB%AF%E8%BF%9B%E9%98%B6%E4%B9%8B%E8%B7%AF/%E9%9D%A2%E8%AF%95%E5%9C%BA%E6%99%AF%E9%A2%98/%E6%9C%8D%E5%8A%A1%E9%99%8D%E7%BA%A7%EF%BC%9A%E4%BB%8E%E6%9C%89%E6%8D%9F%E6%9C%8D%E5%8A%A1%E5%88%B0%E4%BF%9D%E9%9A%9C%E6%A0%B8%E5%BF%83%E4%B8%9A%E5%8A%A1%E7%9A%84%E6%9E%B6%E6%9E%84%E6%99%BA%E6%85%A7.html" aria-label="服务降级：从有损服务到保障核心业务的架构智慧"><!---->服务降级：从有损服务到保障核心业务的架构智慧<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E5%90%8E%E7%AB%AF%E8%BF%9B%E9%98%B6%E4%B9%8B%E8%B7%AF/%E9%9D%A2%E8%AF%95%E5%9C%BA%E6%99%AF%E9%A2%98/%E9%99%90%E6%B5%81%EF%BC%9A%E4%BB%8E%E7%AE%97%E6%B3%95%E5%88%B0%E9%98%88%E5%80%BC%EF%BC%8C%E4%B8%80%E6%AC%A1%E6%80%A7%E8%AE%B2%E9%80%8F.html" aria-label="限流：从算法到阈值，一次性讲透"><!---->限流：从算法到阈值，一次性讲透<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E5%90%8E%E7%AB%AF%E8%BF%9B%E9%98%B6%E4%B9%8B%E8%B7%AF/%E9%9D%A2%E8%AF%95%E5%9C%BA%E6%99%AF%E9%A2%98/Go%E7%A8%8B%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%E8%80%97%E5%B0%BD%E5%A6%82%E4%BD%95%E6%8E%92%E6%9F%A5.html" aria-label="Go程序数据库连接池耗尽如何排查"><!---->Go程序数据库连接池耗尽如何排查<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E5%90%8E%E7%AB%AF%E8%BF%9B%E9%98%B6%E4%B9%8B%E8%B7%AF/%E9%9D%A2%E8%AF%95%E5%9C%BA%E6%99%AF%E9%A2%98/Java%E7%BA%BF%E4%B8%8A%E6%8E%A5%E5%8F%A3%E5%93%8D%E5%BA%94%E6%85%A2%E5%A6%82%E4%BD%95%E6%8E%92%E6%9F%A5.html" aria-label="Java线上接口响应慢如何排查"><!---->Java线上接口响应慢如何排查<!----></a></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->当面试官问题“负载均衡”，哪些点是核心？</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/Percygu" target="_blank" rel="noopener noreferrer">秀才</a></span><span property="author" content="秀才"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2025年6月26日</span><meta property="datePublished" content="2025-06-26T15:42:17.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 19 分钟</span><meta property="timeRequired" content="PT19M"></span><!----><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color4" role>场景题</span><span class="page-tag-item color1" role>面试题</span><span class="page-tag-item color8" role>负载均衡</span><!--]--><meta property="keywords" content="场景题,面试题,负载均衡"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc" vp-toc><!----><div class="vp-toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-夯实基础-——-负载均衡的核心算法">1. 夯实基础 —— 负载均衡的核心算法</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-1-静态负载均衡算法">1.1 静态负载均衡算法</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-动态负载均衡算法">1.2 动态负载均衡算法</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-面试亮点与实战进阶">2. 面试亮点与实战进阶</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-1-巧妙应对-大请求-难题">2.1 巧妙应对&quot;大请求&quot;难题</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-2-动态权重调整的艺术">2.2 动态权重调整的艺术</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-3-一致性哈希与本地缓存的化学反应">2.3 一致性哈希与本地缓存的化学反应</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-总结-带着架构思维去面试">3. 总结：带着架构思维去面试</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content" vp-content><h1 id="当面试官问题-负载均衡-哪些点是核心" tabindex="-1"><a class="header-anchor" href="#当面试官问题-负载均衡-哪些点是核心"><span>当面试官问题“负载均衡”，哪些点是核心？</span></a></h1><p>负载均衡，这个话题在微服务架构里几乎无人不晓，也是面试中的&quot;常客&quot;。我们都知道，它在分布式系统中处于核心位置，任何一次服务调用，首先要面对的就是负载均衡该如何选择。这自然也让它成了面试中的必考题。</p><p>但可惜的是，即便我们都清楚这是个必考点，却很难在面试中聊出新意和亮点。多数候选人的回答，往往只是简单地罗列几种自己知道的负载均衡算法，稍微好一些的，会进一步探讨不同算法的优缺点。坦白说，这样的回答，并不足以让面试官在你身上贴上&quot;技术专家&quot;的标签。</p><p>所以今天，我想换个方式，带你深入那些算法背后微妙的细节，并给出一个结合本地缓存的实战案例。我的目标是，让你在下次面试中，能真正做到游刃有余，展现出超越大多数人的技术深度，给面试官留下深刻的印象。</p><h2 id="_1-夯实基础-——-负载均衡的核心算法" tabindex="-1"><a class="header-anchor" href="#_1-夯实基础-——-负载均衡的核心算法"><span>1. 夯实基础 —— 负载均衡的核心算法</span></a></h2><p>在深入探讨之前，我们必须先对负载均衡的基础算法有一个清晰的认识。从本质上讲，负载均衡就是要解决一个核心问题：&quot;当一个请求过来时，我应该把它交给集群中的哪一台服务器处理？&quot;</p><figure><img src="/assets/1%E4%BF%AE%E6%94%B9-DZCgdc7F.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>理论上，你当然希望把请求精准地发送给那个能够最快返回响应的节点。但要做到这一点并不容易。你可能会有些困惑，因为我们常听到的轮询、随机、哈希等算法，似乎并没有在&quot;试图判断哪个节点最合适&quot;。</p><p>没错，这一类算法我们称之为静态负载均衡算法。它们并不实时感知后端服务的真实负载，而是依赖于统计学意义上的&quot;最优&quot;，即假设在大量请求下，按照既定规则分配，最终能够达到整体的均衡。</p><p>与之相对的，是动态负载均衡算法。这类算法会实时地、或者准实时地去探测所有候选节点的状态，并从中挑选出当前最合适的节点。典型的例子包括最少连接数、最少活跃请求数以及最快响应时间算法。</p><p>接下来，我们一个一个地来剖析它们。</p><h3 id="_1-1-静态负载均衡算法" tabindex="-1"><a class="header-anchor" href="#_1-1-静态负载均衡算法"><span>1.1 静态负载均衡算法</span></a></h3><h4 id="_1-1-1-轮询-round-robin-与加权轮询-weighted-round-robin" tabindex="-1"><a class="header-anchor" href="#_1-1-1-轮询-round-robin-与加权轮询-weighted-round-robin"><span>1.1.1 轮询（Round Robin）与加权轮询（Weighted Round Robin）</span></a></h4><p>轮询是最简单、最直观的一种策略，用一句俗语讲，就是&quot;排排坐，分果果&quot;。有A、B、C三台服务器，第一个请求给A，第二个给B，第三个给C，第四个再回到A，如此循环往复，简单粗暴，主打一个&quot;雨露均沾&quot;。</p><figure><img src="/assets/2%E4%BF%AE%E6%94%B9-UsQFM_Iy.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>但现实中，服务器的性能（CPU、内存等）往往并不相同。让一台&quot;法拉利&quot;和一台&quot;拖拉机&quot;处理同等数量的请求显然不合理。因此，加权轮询应运而生。我们可以根据服务器的性能配置赋予不同的&quot;权重&quot;，性能越好，权重越高，被分配到的请求就越多，实现&quot;能者多劳&quot;。</p><figure><img src="/assets/3%E4%BF%AE%E6%94%B9-Cwq4IzJW.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="_1-1-2-深度思考-平滑加权轮询" tabindex="-1"><a class="header-anchor" href="#_1-1-2-深度思考-平滑加权轮询"><span>1.1.2 深度思考：平滑加权轮询</span></a></h4><p>普通的加权轮询虽然考虑了权重，但可能存在一个问题：它可能会在短时间内连续将请求发往同一高权重节点，造成流量突刺。例如，权重为{A:3, B:1, C:1}，那么可能会出现 A, A, A, B, C 这样的序列，对A的瞬时压力较大。</p><p>为了解决这个问题，Nginx等成熟的负载均衡器引入了更精妙的&quot;平滑加权轮询算法&quot;。</p><p>该算法的逻辑稍显复杂，它为每个节点维护两个权重：一个是固定的<code>weight</code>（初始权重），另一个是会动态变化的<code>current_weight</code>（当前权重）。每次选择节点时，执行以下步骤：</p><ol><li><p>遍历所有节点，将其<code>current_weight</code>的值增加各自的<code>weight</code>。</p></li><li><p>在所有节点中，选择<code>current_weight</code>值最大的那个作为本次的目标节点。</p></li><li><p>将选中节点的<code>current_weight</code>减去所有节点<code>weight</code>的总和。</p></li></ol><p>通过这种方式，一个高权重节点在被选中后，它的&quot;当前权重&quot;会大幅下降，从而保证下一次轮到其他节点，使得流量分配在时间上更加平滑均匀，避免了流量的集中爆发。</p><h4 id="_1-1-3-随机-random-与加权随机-weighted-random" tabindex="-1"><a class="header-anchor" href="#_1-1-3-随机-random-与加权随机-weighted-random"><span>1.1.3 随机（Random）与加权随机（Weighted Random）</span></a></h4><p>随机算法的逻辑同样简单：从可用节点列表中完全随机地抽取一个来处理请求。</p><p>而加权随机则是为每个节点设置一个被&quot;抽中&quot;的概率，这个概率通常与权重成正比。权重越大的节点，被选中的几率也越高。</p><figure><img src="/assets/4%E4%BF%AE%E6%94%B9-C05cyCtx.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>在实践中，随机类算法和轮询类算法在宏观上的效果是相似的，但轮询的可控性相对更强一些，序列是确定的。在很多场景下，它们可以互为替代。</p><h4 id="_1-1-4-哈希-hash-与一致性哈希-consistent-hashing" tabindex="-1"><a class="header-anchor" href="#_1-1-4-哈希-hash-与一致性哈希-consistent-hashing"><span>1.1.4 哈希（Hash）与一致性哈希（Consistent Hashing）</span></a></h4><p>哈希算法的思路是，根据请求里的某个固定参数（如用户ID、设备ID、订单号等）计算出一个哈希值，再用该值对服务器数量取模，从而将同一类请求固定地路由到某一台服务器上。</p><figure><img src="/assets/5%E4%BF%AE%E6%94%B9-Bvh65lz8.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>这种方式最大的优点是，对于同一标识的请求，总能命中同一台后端服务器，这对于需要利用本地缓存或者维持会话状态的场景来说，非常有用。但它的弊端也很明显：</p><ul><li><p>哈希函数的选择：如果哈希函数设计不佳，导致计算出的哈希值分布不均，就会造成数据倾斜，某些节点负载过高。</p></li><li><p>集群伸缩的噩梦：当集群扩缩容，服务器数量<code>N</code>发生变化时，<code>mod N</code>的计算结果会剧烈变动，导致绝大多数缓存失效，引发缓存雪崩。</p></li></ul><p>为了攻克这个难题，一致性哈希被设计出来，它也是面试中的高频考点。</p><p>你可以将其理解为一个0到2^32-1的闭环哈希环。它的工作流程如下：</p><ol><li><p>节点映射：将每个服务器节点的IP或主机名进行哈希计算，映射到哈希环上的某个具体位置。</p></li><li><p>请求映射：当一个请求到来，根据其Key（如用户ID）计算哈希值，同样映射到环上的某个位置。</p></li><li><p>节点查找：从请求映射的位置开始，沿着顺时针方向寻找，遇到的第一个服务器节点，就是该请求的目标处理节点。</p></li></ol><figure><img src="/assets/6%E4%BF%AE%E6%94%B9-6d5tiEnM.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>打个比方，这就像一个钟表，朋友约你&quot;下一个整点&quot;在某地见面，你一看表是3:45，那么你自然知道下一个整点是4点。一致性哈希的查找过程与此类似。</p><p>它的精妙之处在于，当一个节点下线或上线时，它只会影响到其在哈希环上逆时针方向相邻的一小部分请求，而不会导致全局性的映射关系失效，从而极大地保证了集群伸缩时系统的稳定性。</p><h3 id="_1-2-动态负载均衡算法" tabindex="-1"><a class="header-anchor" href="#_1-2-动态负载均衡算法"><span>1.2 动态负载均衡算法</span></a></h3><p>与静态算法不同，动态算法会实时采集服务端的负载数据，并以此为依据进行&quot;智能&quot;的流量分配。</p><h4 id="_1-2-1-最少连接数-least-connections" tabindex="-1"><a class="header-anchor" href="#_1-2-1-最少连接数-least-connections"><span>1.2.1 最少连接数（Least Connections）</span></a></h4><p>该算法的假设非常直观：连接数越少的服务器，其当前负载就越低。因此，它会选择当前活跃连接数最少的节点来处理新请求。</p><figure><img src="/assets/7%E4%BF%AE%E6%94%B9-BxqKdDBj.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>这个假设在很多场景下是成立的，但存在一个不容忽视的盲点：连接数不完全等同于负载压力。尤其在如今广泛采用连接多路复用的情况下，一个客户端可能通过一个连接，连续发送10个请求。此时，连接数并不能真实反映节点的繁忙程度。一个处理轻量级请求的节点可能维持着很多连接，但CPU空闲；而另一个节点可能只有一个连接，却在处理一个极其耗时的计算任务。</p><h4 id="_1-2-2-最少活跃数-least-active-requests" tabindex="-1"><a class="header-anchor" href="#_1-2-2-最少活跃数-least-active-requests"><span>1.2.2 最少活跃数（Least Active Requests）</span></a></h4><p>这是对&quot;最少连接数&quot;的改进，它关注的是&quot;活跃请求数&quot;，即服务端已经接收但尚未处理完成返回响应的请求数量。客户端会统计每个节点的活跃请求数，并将新请求发往数量最少的那个节点。</p><figure><img src="/assets/8%E4%BF%AE%E6%94%B9-D-eKCfOz.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>这比看连接数更能反映节点的真实负载，但它同样无法区分请求本身的&quot;重量&quot;。一个处理大商家报表的请求，其对资源的消耗可能远超十个普通用户的简单查询请求。因此，即便活跃数相同，两个节点的实际负载也可能天差地别。</p><h4 id="_1-2-3-最快响应时间-fastest-response-time" tabindex="-1"><a class="header-anchor" href="#_1-2-3-最快响应时间-fastest-response-time"><span>1.2.3 最快响应时间（Fastest Response Time）</span></a></h4><p>该算法认为，节点的响应时间是其综合处理能力的最佳体现，因为它综合了网络延迟、服务器负载、任务处理时长等多种因素。响应时间越短，说明节点当前状态越好。这里的响应时间可以是最近一段时间的平均响应时间，也可以是P99、P999等分位线指标，选择哪种具体看业务场景，效果不会有天壤之别。</p><figure><img src="/assets/9%E4%BF%AE%E6%94%B9-BXrbmWw8.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>这是一个更加精准和综合的动态指标。在实现时需要特别注意，统计的响应时间应具有&quot;时效性&quot;。也就是说，我们应该只统计近期请求的响应时间，并且越近的响应时间，其参考权重应该越高。这个&quot;指标随时间衰减&quot;的思想，在服务治理的很多领域（如熔断、限流）都会反复出现，是一个非常重要的概念。</p><h4 id="_1-2-4-算法小结与共同挑战" tabindex="-1"><a class="header-anchor" href="#_1-2-4-算法小结与共同挑战"><span>1.2.4 算法小结与共同挑战</span></a></h4><p>最少连接数、最少活跃数和最快响应时间，都可以看作是选择了单一的指标来评估节点负载。这个思路可以启发我们，在特定场景下设计自己的负载均衡算法。比如说在CPU密集型的应用里，你可以设计一个负载均衡算法，每次筛选CPU负载最低的节点。当然，这里的难点就变成了你需要考虑怎么高效、低成本地采集到所有服务端节点的CPU负载数据。</p><p>这些动态算法还有一个共同的挑战：信息孤岛。因为负载数据通常是由客户端各自采集和决策的。客户端A并不知道客户端B向服务器发送了多少请求，这导致每个客户端都像一个&quot;信息孤岛&quot;，基于不完整的信息做出的决策可能是片面的，甚至是错误的。</p><figure><img src="/assets/10%E4%BF%AE%E6%94%B9-i-nXs3Sn.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>如图所示，客户端1看到自己与服务端节点1的连接数最少，于是选择了它。但它并不知道，客户端2已经与节点1建立了大量的连接，导致节点1的实际负载非常高。此时，客户端1本应选择节点2。</p><p>要解决这个问题，需要建立全局的上帝视角，让服务端主动上报状态。思路有两种：</p><ol><li>响应时携带：服务端在返回业务数据时，通过HTTP Header或RPC的Metadata，将自己当前的CPU、内存等负载信息一并返回给客户端。这需要微服务框架的支持。</li></ol><figure><img src="/assets/11%E4%BF%AE%E6%94%B9-J-1POs2S.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>统一监控平台：所有服务端节点定期向一个中心化的监控系统（如Prometheus）上报自己的状态数据。客户端在决策前，先向监控系统查询全局最优节点。</li></ul><figure><img src="/assets/12%E4%BF%AE%E6%94%B9-_qHmj2wk.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>不过，由于实现复杂，会引入额外的依赖和延迟，目前业界大规模采用的依旧是简单的静态算法，但这并不妨碍我们将这些深度思考作为面试的亮点。</p><h2 id="_2-面试亮点与实战进阶" tabindex="-1"><a class="header-anchor" href="#_2-面试亮点与实战进阶"><span>2. 面试亮点与实战进阶</span></a></h2><p>掌握了基础算法，你已经及格了。想拿到优秀，你需要展现出解决复杂问题的能力。在准备面试时，你必须搞清楚自己公司项目里，无论是Nginx网关还是客户端负载均衡，用的是什么算法，并准备一些相关的线上事故案例，这会非常有说服力。</p><h3 id="_2-1-巧妙应对-大请求-难题" tabindex="-1"><a class="header-anchor" href="#_2-1-巧妙应对-大请求-难题"><span>2.1 巧妙应对&quot;大请求&quot;难题</span></a></h3><p>你可以通过一个你亲身经历或精心准备的线上案例来引出这个话题：</p><p>&quot;一般来说，加权类的算法都需要考虑权重的设置和调整。我们公司线上用的是轮询，虽然简单，但因为它没有实际查询服务端节点的负载，难免会出现偶发性的负载不均衡。&quot;</p><p>&quot;我们曾经遇到一个问题：线上服务大部分时间RT都很平稳，但会偶发性地出现尖锐的毛刺，且间隔和慢的程度都不固定，非常奇怪。后来经过深入排查，发现罪魁祸首是&#39;大请求&#39;——少数大客户的查询会消耗掉节点的大量CPU和内存。当其他普通用户的请求被轮询到这个&#39;倒霉&#39;的节点时，就会被严重拖慢。&quot;</p><p>这个问题暴露了所有静态算法的通病：只关心请求数量的均衡，而忽略了请求本身的&quot;重量&quot;。</p><p>当面试官追问解决方案时，你可以从两个层面回答：</p><ul><li><p>业务层面（治本）：&quot;这个大请求本质上是一个大的批量操作。后来我们与业务方协作，对接口进行了优化，限制了一次最多只能获取100条数据，通过产品层面的优化解决了这个问题。&quot;</p></li><li><p>架构层面（治标）：&quot;我们对负载均衡算法做了一点改造。通过用户画像系统，每天计算出一批大客户列表，将他们的请求在负载均衡层通过特定的规则进行识别，并特殊处理，路由到专用的几个节点上。虽然大客户的请求依旧慢，但至少保证了广大普通用户不再受他们影响。这本质上是服务治理中&#39;流量隔离&#39;思想的应用。&quot;</p></li></ul><p>隔离的方案更显技术深度，可以顺势将话题引向服务治理。回答完后，可以再抛出一个引子：&quot;负载均衡有时还能巧妙地解决一些技术问题，比如缓存。&quot;</p><h3 id="_2-2-动态权重调整的艺术" tabindex="-1"><a class="header-anchor" href="#_2-2-动态权重调整的艺术"><span>2.2 动态权重调整的艺术</span></a></h3><p>对于加权类算法，权重如何设定和调整，是另一个体现你思考深度的点。</p><h4 id="_2-2-1-成加败减-原则" tabindex="-1"><a class="header-anchor" href="#_2-2-1-成加败减-原则"><span>2.2.1 &quot;成加败减&quot;原则</span></a></h4><p>权重不应是固定不变的，而应根据节点的实际服务质量动态调整。你可以抓住&quot;成加败减&quot;的关键词来展开。</p><ul><li><p>调用成功：说明节点健康，可以适当增加其权重。这里的&quot;成功&quot;是指网络层面调用成功，即便是业务逻辑返回了失败码，也算是调用成功。</p></li><li><p>调用失败（如超时、网络错误）：说明节点可能存在问题，需要降低其权重，减少后续流量。可以进一步细化，例如网络类错误（如EOF）意味着问题更严重，降权的幅度也应该更大；而超时这类错误，可能是偶发性的，降权幅度可以小一些。</p></li></ul><figure><img src="/assets/13%E4%BF%AE%E6%94%B9-B4oza_bF.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="_2-2-2-别忘了设置-安全边界" tabindex="-1"><a class="header-anchor" href="#_2-2-2-别忘了设置-安全边界"><span>2.2.2 别忘了设置&quot;安全边界&quot;</span></a></h4><p>这是一个非常关键的工程实践经验，也是很多开发者容易忽略的坑：</p><p>&quot;权重的动态调整必须有上下限。权重的绝对值不重要，不同节点间的比例才重要。但调整时必须考虑安全问题。下限不能为0，否则节点一旦权重归零，可能永远无法恢复流量，就&#39;死&#39;掉了。上限也不能无限高，比如不超过初始权重的两三倍，防止因某个节点表现持续良好而导致所有流量都涌向它，最终被压垮。很多公司都因为没有控制好权重的上下限而引发过线上故障。&quot;</p><p>最后，你可以将这个话题再度升华：&quot;这种根据调用结果调整权重的方式，和在服务注册与发现中暂时剔除故障节点，本质上都是为了提高系统的可用性，是服务治理的重要一环。&quot;</p><h3 id="_2-3-一致性哈希与本地缓存的化学反应" tabindex="-1"><a class="header-anchor" href="#_2-3-一致性哈希与本地缓存的化学反应"><span>2.3 一致性哈希与本地缓存的化学反应</span></a></h3><p>这是一个能充分展示你架构设计能力的微创新方案。</p><h4 id="_2-3-1-方案的提出与优势" tabindex="-1"><a class="header-anchor" href="#_2-3-1-方案的提出与优势"><span>2.3.1 方案的提出与优势</span></a></h4><p>&quot;在性能要求极致的场景，我们会使用本地缓存。但如果配合轮询等算法，同一个Key的请求会被分散到不同节点，这将导致几个严重的问题：严重的缓存未命中、多个节点缓存同样的数据导致内存浪费，以及极其棘手的数据一致性问题。&quot;</p><figure><img src="/assets/14%E4%BF%AE%E6%94%B9-CfozauSy.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>&quot;在这种情况下，一个很自然的想法就是，能否把同一类请求都让同一个节点来处理。于是，我们的解决方案是，将一致性哈希算法与本地缓存结合。例如，针对用户的缓存，我们使用用户ID作为哈希的Key，这样就可以确保同一个用户的请求都会被稳定地路由到同一节点上，这极大地提升了本地缓存的命中率，并降低了整体的内存消耗。&quot;</p><figure><img src="/assets/15%E4%BF%AE%E6%94%B9-gSWkqfZI.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="_2-3-2-为什么说只能缓解-无法根治" tabindex="-1"><a class="header-anchor" href="#_2-3-2-为什么说只能缓解-无法根治"><span>2.3.2 为什么说只能缓解，无法根治？</span></a></h4><p>在抛出方案后，主动揭示其局限性，更能体现你的严谨和思考深度。</p><p>&quot;需要强调的是，即便采用了一致性哈希，也只能&#39;缓解&#39;而不是&#39;根治&#39;数据一致性问题。&quot;</p><p>当面试官追问时，你就可以给出最后的答案，关键词是&quot;应用发布&quot;：</p><p>&quot;问题出在集群节点数量发生变化的瞬间，比如应用发布或服务器扩缩容时。当整个集群的节点数量发生变化时，就难免会导致同样的数据缓存在多个节点上。</p><figure><img src="/assets/16%E4%BF%AE%E6%94%B9-BhVH3gMB.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>想象这个时序：</p><ol><li><p>一个读请求A（查询user_id为1的昵称）根据当时的哈希规则，命中老节点N1，但N1本地缓存没有数据，于是准备查询数据库。</p></li><li><p>此时，集群发生变更（如上线了新节点N2），哈希环结构改变。</p></li><li><p>紧接着，一个写请求B（将user_id为1的昵称改为小刚）根据新的哈希规则，命中了新节点N2。N2更新数据库，并刷新了自己的本地缓存为&quot;小刚&quot;。</p></li><li><p>随后，请求A在老节点N1上从数据库读到了旧数据&quot;小明&quot;，并写入了N1的本地缓存。</p></li></ol><p>这就造成了数据不一致。虽然这个不一致的窗口期很短，但它确实存在。应用发布是节点数量变化最常见的原因，因为发布过程就可以看作是先下线一个老节点，再上线一个新节点。不过，也可以看出，这个方案已经将数据一致性的问题大大缓解了。&quot;</p><p>通过这个方案，你已经主动将话题引向了更为复杂的缓存和数据一致性领域，可以为后续的讨论做足铺垫。</p><h2 id="_3-总结-带着架构思维去面试" tabindex="-1"><a class="header-anchor" href="#_3-总结-带着架构思维去面试"><span>3. 总结：带着架构思维去面试</span></a></h2><p>今天我们系统性地探讨了负载均衡。从基础的静态、动态算法，到平滑加权、一致性哈希的深度原理，再到结合线上案例的&quot;大请求隔离&quot;、&quot;动态权重调整&quot;和&quot;一致性哈希+本地缓存&quot;三大实战亮点。</p><p>记住这些关键词：大请求、成加败减、上下限、可用性、应用发布。将这些知识点内化，并结合自己的项目经验，形成一套属于你自己的、有深度、有亮点的回答体系，你一定能让面试官刮目相看。</p></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/yourusername/xiucai-stack/edit/main/src/后端进阶之路/面试场景题/当面试官问起&quot;负载均衡&quot;，哪些点是核心？.md" aria-label="在 GitHub 上编辑此页" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->在 GitHub 上编辑此页<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">上次编辑于: </span><span class="vp-meta-info" data-allow-mismatch="text">2025/6/26 23:42:17</span></div><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 380059082@qq.com">gupeng</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/%E5%90%8E%E7%AB%AF%E8%BF%9B%E9%98%B6%E4%B9%8B%E8%B7%AF/%E9%9D%A2%E8%AF%95%E5%9C%BA%E6%99%AF%E9%A2%98/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E6%A0%B8%E5%BF%83%EF%BC%9A%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0%E7%9A%84AP%E4%B8%8ECP%E6%8A%89%E6%8B%A9.html" aria-label="微服务架构核心：服务注册与发现的AP与CP抉择"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->微服务架构核心：服务注册与发现的AP与CP抉择</div></a><a class="route-link auto-link next" href="/%E5%90%8E%E7%AB%AF%E8%BF%9B%E9%98%B6%E4%B9%8B%E8%B7%AF/%E9%9D%A2%E8%AF%95%E5%9C%BA%E6%99%AF%E9%A2%98/%E7%86%94%E6%96%AD%EF%BC%9A%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E5%9C%B0%E5%BA%94%E5%AF%B9%E6%9C%8D%E5%8A%A1%E9%9B%AA%E5%B4%A9%E4%B8%8E%E6%8A%96%E5%8A%A8.html" aria-label="熔断：如何优雅地应对服务雪崩与抖动"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">熔断：如何优雅地应对服务雪崩与抖动<!----></div></a></nav><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">秀才的进阶之路｜专注于技术分享与知识传播｜<a href="https://beian.miit.gov.cn/" target="_blank" style="color: #3b82f6; text-decoration: none;">粤ICP备2024352247号</a></div><div class="vp-copyright">Copyright © 2025 秀才 </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-DnLzMSw7.js" defer></script>
  </body>
</html>
